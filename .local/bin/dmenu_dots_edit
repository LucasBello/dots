#!/bin/bash

# Script reads file $XDG_CONFIG_HOME/config.dots, which should be formatted
# like this:
#   path1 name1
#   path2 name2
#   ...

# Path to dotfile file
path="$XDG_CONFIG_HOME/config.dots"

# Declare associative array
declare -A paths

# Iterate over every line in file
while IFS= read -r line
do
    # Split into words
    words=($line)

    # Add association between words
    paths+=([${words[1]}]=${words[0]})
done < "$path"

# Read user choice using dmenu
choice=$(printf "%s\n" "${!paths[@]}" | dmenu -i -F)

# Exit if no choice
[ -z "$choice" ] && exit 1

# Open chosen file in vim
eval "$TERMINAL -e nvim ${paths[$choice]}"
